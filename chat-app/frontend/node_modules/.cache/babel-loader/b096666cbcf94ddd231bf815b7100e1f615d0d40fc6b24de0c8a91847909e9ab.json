{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport toast from 'react-hot-toast';\nexport const useNotifications = () => {\n  _s();\n  const [permission, setPermission] = useState(Notification.permission);\n  useEffect(() => {\n    // Request notification permission on mount\n    if (permission === 'default') {\n      requestPermission();\n    }\n  }, []);\n  const requestPermission = async () => {\n    try {\n      const result = await Notification.requestPermission();\n      setPermission(result);\n      if (result === 'granted') {\n        toast.success('Notifications enabled!');\n      } else if (result === 'denied') {\n        toast.error('Notifications blocked. Enable in browser settings.');\n      }\n    } catch (error) {\n      console.error('Error requesting notification permission:', error);\n    }\n  };\n  const showNotification = (title, options = {}) => {\n    if (permission === 'granted' && document.hidden) {\n      // Only show notification if tab is not active\n      const notification = new Notification(title, {\n        icon: '/favicon.ico',\n        badge: '/favicon.ico',\n        tag: 'chat-message',\n        renotify: true,\n        ...options\n      });\n\n      // Auto close after 5 seconds\n      setTimeout(() => notification.close(), 5000);\n\n      // Focus window when notification is clicked\n      notification.onclick = () => {\n        window.focus();\n        notification.close();\n      };\n      return notification;\n    }\n  };\n  const showMessageNotification = (senderName, message) => {\n    showNotification(`New message from ${senderName}`, {\n      body: message.length > 50 ? message.substring(0, 50) + '...' : message,\n      icon: '/favicon.ico'\n    });\n  };\n  const showUserStatusNotification = (userName, isOnline) => {\n    showNotification(`${userName} is now ${isOnline ? 'online' : 'offline'}`, {\n      body: `${userName} ${isOnline ? 'joined' : 'left'} the chat`,\n      icon: '/favicon.ico'\n    });\n  };\n  return {\n    permission,\n    requestPermission,\n    showNotification,\n    showMessageNotification,\n    showUserStatusNotification\n  };\n};\n_s(useNotifications, \"1cc4hY2GRUfLR60Zljjv1+AwZLU=\");","map":{"version":3,"names":["useEffect","useState","toast","useNotifications","_s","permission","setPermission","Notification","requestPermission","result","success","error","console","showNotification","title","options","document","hidden","notification","icon","badge","tag","renotify","setTimeout","close","onclick","window","focus","showMessageNotification","senderName","message","body","length","substring","showUserStatusNotification","userName","isOnline"],"sources":["C:/Users/Gargee/redis-sse/chat-app/frontend/src/hooks/useNotifications.js"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport toast from 'react-hot-toast';\r\n\r\nexport const useNotifications = () => {\r\n  const [permission, setPermission] = useState(Notification.permission);\r\n\r\n  useEffect(() => {\r\n    // Request notification permission on mount\r\n    if (permission === 'default') {\r\n      requestPermission();\r\n    }\r\n  }, []);\r\n\r\n  const requestPermission = async () => {\r\n    try {\r\n      const result = await Notification.requestPermission();\r\n      setPermission(result);\r\n      \r\n      if (result === 'granted') {\r\n        toast.success('Notifications enabled!');\r\n      } else if (result === 'denied') {\r\n        toast.error('Notifications blocked. Enable in browser settings.');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error requesting notification permission:', error);\r\n    }\r\n  };\r\n\r\n  const showNotification = (title, options = {}) => {\r\n    if (permission === 'granted' && document.hidden) {\r\n      // Only show notification if tab is not active\r\n      const notification = new Notification(title, {\r\n        icon: '/favicon.ico',\r\n        badge: '/favicon.ico',\r\n        tag: 'chat-message',\r\n        renotify: true,\r\n        ...options\r\n      });\r\n\r\n      // Auto close after 5 seconds\r\n      setTimeout(() => notification.close(), 5000);\r\n\r\n      // Focus window when notification is clicked\r\n      notification.onclick = () => {\r\n        window.focus();\r\n        notification.close();\r\n      };\r\n\r\n      return notification;\r\n    }\r\n  };\r\n\r\n  const showMessageNotification = (senderName, message) => {\r\n    showNotification(`New message from ${senderName}`, {\r\n      body: message.length > 50 ? message.substring(0, 50) + '...' : message,\r\n      icon: '/favicon.ico'\r\n    });\r\n  };\r\n\r\n  const showUserStatusNotification = (userName, isOnline) => {\r\n    showNotification(`${userName} is now ${isOnline ? 'online' : 'offline'}`, {\r\n      body: `${userName} ${isOnline ? 'joined' : 'left'} the chat`,\r\n      icon: '/favicon.ico'\r\n    });\r\n  };\r\n\r\n  return {\r\n    permission,\r\n    requestPermission,\r\n    showNotification,\r\n    showMessageNotification,\r\n    showUserStatusNotification\r\n  };\r\n};"],"mappings":";AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,OAAOC,KAAK,MAAM,iBAAiB;AAEnC,OAAO,MAAMC,gBAAgB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACpC,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGL,QAAQ,CAACM,YAAY,CAACF,UAAU,CAAC;EAErEL,SAAS,CAAC,MAAM;IACd;IACA,IAAIK,UAAU,KAAK,SAAS,EAAE;MAC5BG,iBAAiB,CAAC,CAAC;IACrB;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMA,iBAAiB,GAAG,MAAAA,CAAA,KAAY;IACpC,IAAI;MACF,MAAMC,MAAM,GAAG,MAAMF,YAAY,CAACC,iBAAiB,CAAC,CAAC;MACrDF,aAAa,CAACG,MAAM,CAAC;MAErB,IAAIA,MAAM,KAAK,SAAS,EAAE;QACxBP,KAAK,CAACQ,OAAO,CAAC,wBAAwB,CAAC;MACzC,CAAC,MAAM,IAAID,MAAM,KAAK,QAAQ,EAAE;QAC9BP,KAAK,CAACS,KAAK,CAAC,oDAAoD,CAAC;MACnE;IACF,CAAC,CAAC,OAAOA,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,2CAA2C,EAAEA,KAAK,CAAC;IACnE;EACF,CAAC;EAED,MAAME,gBAAgB,GAAGA,CAACC,KAAK,EAAEC,OAAO,GAAG,CAAC,CAAC,KAAK;IAChD,IAAIV,UAAU,KAAK,SAAS,IAAIW,QAAQ,CAACC,MAAM,EAAE;MAC/C;MACA,MAAMC,YAAY,GAAG,IAAIX,YAAY,CAACO,KAAK,EAAE;QAC3CK,IAAI,EAAE,cAAc;QACpBC,KAAK,EAAE,cAAc;QACrBC,GAAG,EAAE,cAAc;QACnBC,QAAQ,EAAE,IAAI;QACd,GAAGP;MACL,CAAC,CAAC;;MAEF;MACAQ,UAAU,CAAC,MAAML,YAAY,CAACM,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC;;MAE5C;MACAN,YAAY,CAACO,OAAO,GAAG,MAAM;QAC3BC,MAAM,CAACC,KAAK,CAAC,CAAC;QACdT,YAAY,CAACM,KAAK,CAAC,CAAC;MACtB,CAAC;MAED,OAAON,YAAY;IACrB;EACF,CAAC;EAED,MAAMU,uBAAuB,GAAGA,CAACC,UAAU,EAAEC,OAAO,KAAK;IACvDjB,gBAAgB,CAAC,oBAAoBgB,UAAU,EAAE,EAAE;MACjDE,IAAI,EAAED,OAAO,CAACE,MAAM,GAAG,EAAE,GAAGF,OAAO,CAACG,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,KAAK,GAAGH,OAAO;MACtEX,IAAI,EAAE;IACR,CAAC,CAAC;EACJ,CAAC;EAED,MAAMe,0BAA0B,GAAGA,CAACC,QAAQ,EAAEC,QAAQ,KAAK;IACzDvB,gBAAgB,CAAC,GAAGsB,QAAQ,WAAWC,QAAQ,GAAG,QAAQ,GAAG,SAAS,EAAE,EAAE;MACxEL,IAAI,EAAE,GAAGI,QAAQ,IAAIC,QAAQ,GAAG,QAAQ,GAAG,MAAM,WAAW;MAC5DjB,IAAI,EAAE;IACR,CAAC,CAAC;EACJ,CAAC;EAED,OAAO;IACLd,UAAU;IACVG,iBAAiB;IACjBK,gBAAgB;IAChBe,uBAAuB;IACvBM;EACF,CAAC;AACH,CAAC;AAAC9B,EAAA,CAtEWD,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}